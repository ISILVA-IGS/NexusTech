"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var querystring = require("querystring");

var msgpath = { host: "rest.nexmo.com", path: "/sms/json" };
var shortcodePath = { host: "rest.nexmo.com", path: "/sc/us/${type}/json" };
var ttsEndpoint = { host: "api.nexmo.com", path: "/tts/json" };
var ttsPromptEndpoint = { host: "api.nexmo.com", path: "/tts-prompt/json" };
var callEndpoint = { host: "rest.nexmo.com", path: "/call/json" };
var verifyEndpoint = { host: "api.nexmo.com", path: "/verify/json" };
var checkVerifyEndpoint = { host: "api.nexmo.com", path: "/verify/check/json" };
var controlVerifyEndpoint = {
  host: "api.nexmo.com",
  path: "/verify/control/json"
};
var searchVerifyEndpoint = {
  host: "api.nexmo.com",
  path: "/verify/search/json"
};
var niEndpoint = { host: "api.nexmo.com", path: "/ni/advanced/async/json" };
var niBasicEndpoint = { host: "api.nexmo.com", path: "/ni/basic/json" };
var niStandardEndpoint = { host: "api.nexmo.com", path: "/ni/standard/json" };
var niAdvancedEndpoint = { host: "api.nexmo.com", path: "/ni/advanced/json" };
var applicationsEndpoint = { host: "api.nexmo.com", path: "/v1/applications" };
var up = {};
var numberPattern = new RegExp("^[0-9 +()-]*$");

var _options = null;

// Error message resources are maintained globally in one place for easy management
var ERROR_MESSAGES = {
  sender: "Invalid from address",
  to: "Invalid to address",
  msg: "Invalid Text Message",
  msgParams: "Invalid shortcode message parameters",
  countrycode: "Invalid Country Code",
  msisdn: "Invalid MSISDN passed",
  body: "Invalid Body value in Binary Message",
  udh: "Invalid udh value in Binary Message",
  title: "Invalid title in WAP Push message",
  url: "Invalid url in WAP Push message",
  maxDigits: "Invalid max digits for TTS prompt",
  byeText: "Invalid bye text for TTS prompt",
  pinCode: "Invalid pin code for TTS confirm",
  failedText: "Invalid failed text for TTS confirm",
  answerUrl: "Invalid answer URL for call",
  verifyValidation: "Missing Mandatory fields (number and/or brand)",
  checkVerifyValidation: "Missing Mandatory fields (request_id and/or code)",
  controlVerifyValidation: "Missing Mandatory fields (request_id and/or cmd-command)",
  searchVerifyValidation: "Missing Mandatory fields (request_id or request_ids)",
  numberInsightAdvancedValidation: "Missing Mandatory fields (number and/or callback url)",
  numberInsightValidation: "Missing Mandatory field - number",
  numberInsightPatternFailure: "Number can contain digits and may include any or all of the following: white space, -,+, (, ).",
  optionsNotAnObject: "Options parameter should be a dictionary. Check the docs for valid properties for options",
  applicationName: "Invalid argument: name",
  applicationType: "Invalid argument: type",
  applicationAnswerUrl: "Invalid argument: answerUrl",
  applicationEventUrl: "Invalid argument: eventUrl",
  applicationId: "Invalid argument: appId",
  product: "Invalid product. Should be one of [voice, sms]"
};

exports.initialize = function (pkey, psecret, options) {
  // These can default to empty as we may provide a private key for JWT auth
  // In that situation, private key and secret are not required. If you don't provide
  // A key/secret and try and make a request you'll get a 401 error back
  pkey = pkey || "";
  psecret = psecret || "";

  up = {
    api_key: pkey,
    api_secret: psecret
  };
  _options = options;
};

exports.sendBinaryMessage = function (sender, recipient, body, udh, callback) {
  if (!body) {
    sendError(callback, new Error(ERROR_MESSAGES.body));
  } else if (!udh) {
    sendError(callback, new Error(ERROR_MESSAGES.udh));
  } else {
    sendMessage({
      from: sender,
      to: recipient,
      type: "binary",
      body: body,
      udh: udh
    }, callback);
  }
};

exports.sendWapPushMessage = function (sender, recipient, title, url, validity, callback) {
  if (!title) {
    sendError(callback, new Error(ERROR_MESSAGES.title));
  } else if (!url) {
    sendError(callback, new Error(ERROR_MESSAGES.url));
  } else {
    if (typeof validity === "function") {
      callback = validity;
      validity = 86400000;
    }
    sendMessage({
      from: sender,
      to: recipient,
      type: "wappush",
      title: title,
      validity: validity,
      url: url
    }, callback);
  }
};

exports.sendTextMessage = function (sender, recipient, message, opts, callback) {
  if (!message) {
    sendError(callback, new Error(ERROR_MESSAGES.msg));
  } else {
    if (!callback) {
      callback = opts;
      opts = {};
    }
    opts["from"] = sender;
    opts["to"] = recipient;
    opts["text"] = message;
    sendMessage(opts, callback);
  }
};

exports.sendMessage = function (opts, callback) {
  sendMessage(opts, callback);
};
function sendMessage(data, callback) {
  if (!data.from) {
    sendError(callback, new Error(ERROR_MESSAGES.sender));
  } else if (!data.to) {
    sendError(callback, new Error(ERROR_MESSAGES.to));
  } else {
    var path = clone(msgpath);
    path.path += "?" + querystring.stringify(data);
    _options.logger.info("sending message from " + data.from + " to " + data.to + " with message " + data.text);
    sendRequest(path, "POST", function (err, apiResponse) {
      if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {
        sendError(callback, new Error(apiResponse.messages[0]["error-text"]), apiResponse);
      } else {
        if (callback) callback(err, apiResponse);
      }
    });
  }
}

function sendViaShortcode(type, recipient, messageParams, opts, callback) {
  if (!recipient) {
    sendError(callback, new Error(ERROR_MESSAGES.to));
  }
  if (!messageParams || !Object.keys(messageParams)) {
    sendError(callback, new Error(ERROR_MESSAGES.msgParams));
  }
  opts = opts || {};
  var path = clone(shortcodePath);
  path.path = path.path.replace("${type}", type);
  Object.keys(messageParams).forEach(function (key) {
    opts[key] = messageParams[key];
  });
  opts.to = recipient;
  path.path += "?" + querystring.stringify(opts);
  _options.logger.info("sending message from shortcode " + type + " to " + recipient + " with parameters " + JSON.stringify(messageParams));
  sendRequest(path, "POST", function (err, apiResponse) {
    if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {
      sendError(callback, new Error(apiResponse.messages[0]["error-text"]), apiResponse);
    } else {
      if (callback) callback(err, apiResponse);
    }
  });
}
exports.shortcodeAlert = function (recipient, messageParams, opts, callback) {
  sendViaShortcode("alert", recipient, messageParams, opts, callback);
};
exports.shortcode2FA = function (recipient, messageParams, opts, callback) {
  sendViaShortcode("2fa", recipient, messageParams, opts, callback);
};
exports.shortcodeMarketing = function (recipient, messageParams, opts, callback) {
  sendViaShortcode("marketing", recipient, messageParams, opts, callback);
};

function clone(a) {
  return JSON.parse(JSON.stringify(a));
}

function getEndpoint(action) {
  return { path: action };
}

function sendRequest(endpoint, method, callback) {
  endpoint.path = endpoint.path + (endpoint.path.indexOf("?") > 0 ? "&" : "?") + querystring.stringify(up);
  _options.httpClient.request(endpoint, method, callback);
}

exports.checkBalance = function (callback) {
  var balanceEndpoint = getEndpoint("/account/get-balance");
  sendRequest(balanceEndpoint, callback);
};

exports.getPricing = function (countryCode, callback) {
  if (!countryCode || countryCode.length !== 2) {
    sendError(callback, new Error(ERROR_MESSAGES.countrycode));
  } else {
    var pricingEndpoint = getEndpoint("/account/get-pricing/outbound");
    pricingEndpoint.path += "?country=" + countryCode;
    sendRequest(pricingEndpoint, callback);
  }
};

exports.getPhonePricing = function (product, msisdn, callback) {
  if (!product || product != "sms" && product != "voice") {
    sendError(callback, new Error(ERROR_MESSAGES.product));
  } else if (!msisdn) {
    sendError(callback, new Error(ERROR_MESSAGES.msisdn));
  } else {
    var pricingEndpoint = getEndpoint("/account/get-phone-pricing/outbound");
    pricingEndpoint.path += "/" + product + "/" + up.api_key + "/" + up.api_secret + "/" + msisdn;
    sendRequest(pricingEndpoint, callback);
  }
};

exports.getNumbers = function (options, callback) {
  var numbersEndpoint = getEndpoint("/account/numbers");
  if (typeof options === "function") {
    callback = options;
  } else if ((typeof options === "undefined" ? "undefined" : _typeof(options)) === "object") {
    numbersEndpoint.path = numbersEndpoint.path + "?";
    for (var key in options) {
      numbersEndpoint.path = numbersEndpoint.path + key + "=" + options[key] + "&";
    }
  } else {
    sendError(callback, new Error(ERROR_MESSAGES.optionsNotAnObject));
    return;
  }
  sendRequest(numbersEndpoint, callback);
};

exports.searchNumbers = function (countryCode, pattern, callback) {
  if (!countryCode || countryCode.length !== 2) {
    sendError(callback, new Error(ERROR_MESSAGES.countrycode));
  } else {
    var searchEndpoint = getEndpoint("/number/search");
    searchEndpoint.path += "?country=" + countryCode;
    if (typeof pattern === "function") {
      callback = pattern;
    } else if ((typeof pattern === "undefined" ? "undefined" : _typeof(pattern)) === "object") {
      searchEndpoint.path = searchEndpoint.path + "&";
      for (var arg in pattern) {
        searchEndpoint.path = searchEndpoint.path + arg + "=" + pattern[arg] + "&";
      }
    } else {
      searchEndpoint.path = searchEndpoint.path + "&pattern=" + pattern;
    }
    sendRequest(searchEndpoint, callback);
  }
};

exports.buyNumber = function (countryCode, msisdn, callback) {
  if (!countryCode || countryCode.length != 2) {
    sendError(callback, new Error(ERROR_MESSAGES.countrycode));
  } else if (!msisdn) {
    sendError(callback, new Error(ERROR_MESSAGES.msisdn));
  } else {
    var buyEndpoint = getEndpoint("/number/buy");
    buyEndpoint.path += "?country=" + countryCode + "&msisdn=" + msisdn;
    sendRequest(buyEndpoint, "POST", callback);
  }
};

exports.cancelNumber = function (countryCode, msisdn, callback) {
  if (!countryCode || countryCode.length !== 2) {
    sendError(callback, new Error(ERROR_MESSAGES.countrycode));
  } else if (!msisdn) {
    sendError(callback, new Error(ERROR_MESSAGES.msisdn));
  } else {
    var cancelEndpoint = getEndpoint("/number/cancel");
    cancelEndpoint.path += "?country=" + countryCode + "&msisdn=" + msisdn;
    sendRequest(cancelEndpoint, "POST", callback);
  }
};

exports.cancelNumber = function (countryCode, msisdn, callback) {
  if (!countryCode || countryCode.length !== 2) {
    sendError(callback, new Error(ERROR_MESSAGES.countrycode));
  } else if (!msisdn) {
    sendError(callback, new Error(ERROR_MESSAGES.msisdn));
  } else {
    var cancelEndpoint = getEndpoint("/number/cancel");
    cancelEndpoint.path += "?country=" + countryCode + "&msisdn=" + msisdn;
    sendRequest(cancelEndpoint, "POST", callback);
  }
};

exports.updateNumber = function (countryCode, msisdn, params, callback) {
  if (!countryCode || countryCode.length !== 2) {
    sendError(callback, new Error(ERROR_MESSAGES.countrycode));
  } else if (!msisdn) {
    sendError(callback, new Error(ERROR_MESSAGES.msisdn));
  } else {
    var updateEndpoint = getEndpoint("/number/update");
    updateEndpoint.path += "?country=" + countryCode + "&msisdn=" + msisdn;
    updateEndpoint.path = updateEndpoint.path + "&";
    for (var arg in params) {
      updateEndpoint.path = updateEndpoint.path + arg + "=" + encodeURIComponent(params[arg]) + "&";
    }
    sendRequest(updateEndpoint, "POST", callback);
  }
};

exports.getApplications = function (options, callback) {
  var endpoint = getEndpoint(applicationsEndpoint.path);
  endpoint.host = applicationsEndpoint.host;
  if (typeof options === "function") {
    callback = options;
  } else if ((typeof options === "undefined" ? "undefined" : _typeof(options)) === "object") {
    endpoint.path += "?";
    for (var key in options) {
      endpoint.path += key + "=" + options[key] + "&";
    }
  } else {
    sendError(callback, new Error(ERROR_MESSAGES.optionsNotAnObject));
    return;
  }
  sendRequest(endpoint, callback);
};

exports.createApplication = function (name, type, answerUrl, eventUrl, options, callback) {
  if (!name || name.length < 1) {
    sendError(callback, new Error(ERROR_MESSAGES.applicationName));
  } else if (!type) {
    sendError(callback, new Error(ERROR_MESSAGES.applicationType));
  } else if (!answerUrl) {
    sendError(callback, new Error(ERROR_MESSAGES.applicationAnswerUrl));
  } else if (!eventUrl) {
    sendError(callback, new Error(ERROR_MESSAGES.applicationEventUrl));
  } else {
    var createEndpoint = getEndpoint(applicationsEndpoint.path);
    createEndpoint.host = applicationsEndpoint.host;
    createEndpoint.path += "?name=" + encodeURIComponent(name) + "&type=" + type + "&answer_url=" + answerUrl + "&event_url=" + eventUrl;
    for (var key in options) {
      createEndpoint.path += "&" + key + "=" + options[key];
    }
    sendRequest(createEndpoint, "POST", callback);
  }
};

exports.getApplication = function (appId, callback) {
  if (!appId || appId.length < 36) {
    sendError(callback, new Error(ERROR_MESSAGES.applicationId));
  } else {
    var showEndpoint = getEndpoint(applicationsEndpoint.path + "/" + appId);
    showEndpoint.host = applicationsEndpoint.host;
    sendRequest(showEndpoint, callback);
  }
};

exports.updateApplication = function (appId, name, type, answerUrl, eventUrl, options, callback) {
  if (!appId || appId.length < 36) {
    sendError(callback, new Error(ERROR_MESSAGES.applicationId));
  } else if (!name || name.length < 1) {
    sendError(callback, new Error(ERROR_MESSAGES.applicationName));
  } else if (!type) {
    sendError(callback, new Error(ERROR_MESSAGES.applicationType));
  } else if (!answerUrl) {
    sendError(callback, new Error(ERROR_MESSAGES.applicationAnswerUrl));
  } else if (!eventUrl) {
    sendError(callback, new Error(ERROR_MESSAGES.applicationEventUrl));
  } else {
    var updateEndpoint = getEndpoint(applicationsEndpoint.path + "/" + appId);
    updateEndpoint.path += "?name=" + encodeURIComponent(name) + "&type=" + type + "&answer_url=" + answerUrl + "&event_url=" + eventUrl;
    updateEndpoint.host = applicationsEndpoint.host;
    for (var key in options) {
      updateEndpoint.path = updateEndpoint.path + "&" + key + "=" + options[key];
    }
    sendRequest(updateEndpoint, "PUT", callback);
  }
};

exports.deleteApplication = function (appId, callback) {
  if (!appId || appId.length < 36) {
    sendError(callback, new Error(ERROR_MESSAGES.applicationId));
  } else {
    var deleteEndpoint = getEndpoint(applicationsEndpoint.path + "/" + appId);
    deleteEndpoint.host = applicationsEndpoint.host;
    sendRequest(deleteEndpoint, "DELETE", callback);
  }
};

exports.changePassword = function (newSecret, callback) {
  var settingsEndpoint = getEndpoint("/account/settings");
  settingsEndpoint.path += "?newSecret=" + encodeURIComponent(newSecret);
  sendRequest(settingsEndpoint, "POST", callback);
};

exports.changeMoCallbackUrl = function (newUrl, callback) {
  var settingsEndpoint = getEndpoint("/account/settings");
  settingsEndpoint.path += "?moCallBackUrl=" + encodeURIComponent(newUrl);
  sendRequest(settingsEndpoint, "POST", callback);
};

exports.changeDrCallbackUrl = function (newUrl, callback) {
  var settingsEndpoint = getEndpoint("/account/settings");
  settingsEndpoint.path += "?drCallBackUrl=" + encodeURIComponent(newUrl);
  sendRequest(settingsEndpoint, "POST", callback);
};

exports.verifyNumber = function (inputParams, callback) {
  if (!inputParams.number || !inputParams.brand) {
    sendError(callback, new Error(ERROR_MESSAGES.verifyValidation));
  } else {
    var vEndpoint = clone(verifyEndpoint);
    vEndpoint.path += "?" + querystring.stringify(inputParams);
    sendRequest(vEndpoint, callback);
  }
};

exports.checkVerifyRequest = function (inputParams, callback) {
  if (!inputParams.request_id || !inputParams.code) {
    sendError(callback, new Error(ERROR_MESSAGES.checkVerifyValidation));
  } else {
    var vEndpoint = clone(checkVerifyEndpoint);
    vEndpoint.path += "?" + querystring.stringify(inputParams);
    sendRequest(vEndpoint, callback);
  }
};

exports.controlVerifyRequest = function (inputParams, callback) {
  if (!inputParams.request_id || !inputParams.cmd) {
    sendError(callback, new Error(ERROR_MESSAGES.controlVerifyValidation));
  } else {
    var vEndpoint = clone(controlVerifyEndpoint);
    vEndpoint.path += "?" + querystring.stringify(inputParams);
    sendRequest(vEndpoint, callback);
  }
};

exports.searchVerifyRequest = function (requestIds, callback) {
  var requestIdParam = {};
  if (!requestIds) {
    sendError(callback, new Error(ERROR_MESSAGES.searchVerifyValidation));
  } else {
    if (Array.isArray(requestIds)) {
      if (requestIds.length === 1) {
        requestIdParam.request_id = requestIds;
      } else {
        requestIdParam.request_ids = requestIds;
      }
    } else {
      requestIdParam.request_id = requestIds;
    }
    var vEndpoint = clone(searchVerifyEndpoint);
    vEndpoint.path += "?" + querystring.stringify(requestIdParam);
    sendRequest(vEndpoint, callback);
  }
};

exports.numberInsight = function (inputParams, callback) {
  numberInsightAsync(inputParams, callback);
};

exports.numberInsightBasic = function (inputParams, callback) {
  numberInsightCommon(niBasicEndpoint, inputParams, callback);
};

exports.numberInsightStandard = function (inputParams, callback) {
  numberInsightCommon(niStandardEndpoint, inputParams, callback);
};

exports.numberInsightAdvanced = function (inputParams, callback) {
  numberInsightCommon(niAdvancedEndpoint, inputParams, callback);
};

exports.numberInsightAdvancedAsync = function (inputParams, callback) {
  numberInsightAsync(inputParams, callback);
};

function numberInsightAsync(inputParams, callback) {
  if (!inputParams.number || !inputParams.callback) {
    sendError(callback, new Error(ERROR_MESSAGES.numberInsightAdvancedValidation));
  } else {
    var nEndpoint = clone(niEndpoint);
    nEndpoint.path += "?" + querystring.stringify(inputParams);
    sendRequest(nEndpoint, callback);
  }
}

function numberInsightCommon(endpoint, inputParams, callback) {
  if (validateNumber(inputParams, callback)) {
    var inputObj;
    if ((typeof inputParams === "undefined" ? "undefined" : _typeof(inputParams)) !== "object") {
      inputObj = { number: inputParams };
    } else {
      inputObj = inputParams;
    }
    var nEndpoint = clone(endpoint);
    nEndpoint.path += "?" + querystring.stringify(inputObj);
    sendRequest(nEndpoint, callback);
  }
}
function validateNumber(inputParams, callback) {
  if ((typeof inputParams === "undefined" ? "undefined" : _typeof(inputParams)) === "object" && !inputParams.number) {
    sendError(callback, new Error(ERROR_MESSAGES.numberInsightValidation));
    return false;
  } else if ((typeof inputParams === "undefined" ? "undefined" : _typeof(inputParams)) === "object" && !numberPattern.test(inputParams.number)) {
    sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));
    return false;
  } else if ((typeof inputParams === "undefined" ? "undefined" : _typeof(inputParams)) !== "object" && (!inputParams || !numberPattern.test(inputParams))) {
    sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));
    return false;
  }
  return true;
}

function sendVoiceMessage(voiceEndpoint, data, callback) {
  if (!data.to) {
    sendError(callback, new Error(ERROR_MESSAGES.to));
  } else {
    var endpoint = clone(voiceEndpoint);
    endpoint.path += "?" + querystring.stringify(data);
    _options.logger.info("sending TTS message to " + data.to + " with message " + data.text);
    sendRequest(endpoint, "POST", function (err, apiResponse) {
      if (!err && apiResponse.status && apiResponse.status > 0) {
        sendError(callback, new Error(apiResponse["error-text"]), apiResponse);
      } else {
        if (callback) callback(err, apiResponse);
      }
    });
  }
}

exports.sendTTSMessage = function (recipient, message, opts, callback) {
  if (!message) {
    sendError(callback, new Error(ERROR_MESSAGES.msg));
  } else {
    if (!opts) {
      opts = {};
    }
    opts["to"] = recipient;
    opts["text"] = message;
    sendVoiceMessage(ttsEndpoint, opts, callback);
  }
};

exports.sendTTSPromptWithCapture = function (recipient, message, maxDigits, byeText, opts, callback) {
  if (!message) {
    sendError(callback, new Error(ERROR_MESSAGES.msg));
  } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {
    sendError(callback, new Error(ERROR_MESSAGES.maxDigits));
  } else if (!byeText) {
    sendError(callback, new Error(ERROR_MESSAGES.byeText));
  } else {
    if (!opts) {
      opts = {};
    }
    opts["to"] = recipient;
    opts["text"] = message;
    opts["max_digits"] = maxDigits;
    opts["bye_text"] = byeText;
    sendVoiceMessage(ttsPromptEndpoint, opts, callback);
  }
};

exports.sendTTSPromptWithConfirm = function (recipient, message, maxDigits, pinCode, byeText, failedText, opts, callback) {
  if (!message) {
    sendError(callback, new Error(ERROR_MESSAGES.msg));
  } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {
    sendError(callback, new Error(ERROR_MESSAGES.maxDigits));
  } else if (!pinCode || pinCode.length !== maxDigits) {
    sendError(callback, new Error(ERROR_MESSAGES.pinCode));
  } else if (!byeText) {
    sendError(callback, new Error(ERROR_MESSAGES.byeText));
  } else if (!failedText) {
    sendError(callback, new Error(ERROR_MESSAGES.failedText));
  } else {
    if (!opts) {
      opts = {};
    }
    opts["to"] = recipient;
    opts["text"] = message;
    opts["max_digits"] = maxDigits;
    opts["pin_code"] = pinCode;
    opts["bye_text"] = byeText;
    opts["failed_text"] = failedText;
    sendVoiceMessage(ttsPromptEndpoint, opts, callback);
  }
};

exports.call = function (recipient, answerUrl, opts, callback) {
  if (!answerUrl) {
    sendError(callback, new Error(ERROR_MESSAGES.answerUrl));
  } else {
    if (!opts) {
      opts = {};
    }
    opts["to"] = recipient;
    opts["answer_url"] = answerUrl;
    sendVoiceMessage(callEndpoint, opts, callback);
  }
};

function sendError(callback, err, returnData) {
  // Throw the error in case if there is no callback passed
  if (callback) {
    callback(err, returnData);
  } else {
    throw err;
  }
}

exports.getWithQuery = function (path, query, creds, opts, callback) {
  if (!query) {
    throw new Error('"query" is a required parameter');
  }

  var pathExt = "";
  if (typeof query === "string") {
    // single call Id
    pathExt = "/" + query;
  } else if ((typeof query === "undefined" ? "undefined" : _typeof(query)) === "object" && Object.keys(query).length > 0) {
    // filter
    pathExt = "?" + querystring.stringify(query);
  }

  var config = {
    host: "api.nexmo.com",
    path: "" + path + pathExt,
    method: "GET",
    headers: {
      "Content-Type": "application/json",
      Authorization: "Bearer " + creds.generateJwt()
    }
  };
  opts.httpClient.request(config, callback);
};

exports.setHost = function (aHost) {
  msgpath.host = aHost;
  shortcodePath.host = aHost;
  ttsEndpoint.host = aHost;
  ttsPromptEndpoint.host = aHost;
  callEndpoint.host = aHost;
  verifyEndpoint.host = aHost;
  checkVerifyEndpoint.host = aHost;
  controlVerifyEndpoint.host = aHost;
  searchVerifyEndpoint.host = aHost;
  niEndpoint.host = aHost;
  niBasicEndpoint.host = aHost;
  niStandardEndpoint.host = aHost;
  applicationsEndpoint.host = aHost;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJxdWVyeXN0cmluZyIsInJlcXVpcmUiLCJtc2dwYXRoIiwiaG9zdCIsInBhdGgiLCJzaG9ydGNvZGVQYXRoIiwidHRzRW5kcG9pbnQiLCJ0dHNQcm9tcHRFbmRwb2ludCIsImNhbGxFbmRwb2ludCIsInZlcmlmeUVuZHBvaW50IiwiY2hlY2tWZXJpZnlFbmRwb2ludCIsImNvbnRyb2xWZXJpZnlFbmRwb2ludCIsInNlYXJjaFZlcmlmeUVuZHBvaW50IiwibmlFbmRwb2ludCIsIm5pQmFzaWNFbmRwb2ludCIsIm5pU3RhbmRhcmRFbmRwb2ludCIsIm5pQWR2YW5jZWRFbmRwb2ludCIsImFwcGxpY2F0aW9uc0VuZHBvaW50IiwidXAiLCJudW1iZXJQYXR0ZXJuIiwiUmVnRXhwIiwiX29wdGlvbnMiLCJFUlJPUl9NRVNTQUdFUyIsInNlbmRlciIsInRvIiwibXNnIiwibXNnUGFyYW1zIiwiY291bnRyeWNvZGUiLCJtc2lzZG4iLCJib2R5IiwidWRoIiwidGl0bGUiLCJ1cmwiLCJtYXhEaWdpdHMiLCJieWVUZXh0IiwicGluQ29kZSIsImZhaWxlZFRleHQiLCJhbnN3ZXJVcmwiLCJ2ZXJpZnlWYWxpZGF0aW9uIiwiY2hlY2tWZXJpZnlWYWxpZGF0aW9uIiwiY29udHJvbFZlcmlmeVZhbGlkYXRpb24iLCJzZWFyY2hWZXJpZnlWYWxpZGF0aW9uIiwibnVtYmVySW5zaWdodEFkdmFuY2VkVmFsaWRhdGlvbiIsIm51bWJlckluc2lnaHRWYWxpZGF0aW9uIiwibnVtYmVySW5zaWdodFBhdHRlcm5GYWlsdXJlIiwib3B0aW9uc05vdEFuT2JqZWN0IiwiYXBwbGljYXRpb25OYW1lIiwiYXBwbGljYXRpb25UeXBlIiwiYXBwbGljYXRpb25BbnN3ZXJVcmwiLCJhcHBsaWNhdGlvbkV2ZW50VXJsIiwiYXBwbGljYXRpb25JZCIsInByb2R1Y3QiLCJleHBvcnRzIiwiaW5pdGlhbGl6ZSIsInBrZXkiLCJwc2VjcmV0Iiwib3B0aW9ucyIsImFwaV9rZXkiLCJhcGlfc2VjcmV0Iiwic2VuZEJpbmFyeU1lc3NhZ2UiLCJyZWNpcGllbnQiLCJjYWxsYmFjayIsInNlbmRFcnJvciIsIkVycm9yIiwic2VuZE1lc3NhZ2UiLCJmcm9tIiwidHlwZSIsInNlbmRXYXBQdXNoTWVzc2FnZSIsInZhbGlkaXR5Iiwic2VuZFRleHRNZXNzYWdlIiwibWVzc2FnZSIsIm9wdHMiLCJkYXRhIiwiY2xvbmUiLCJzdHJpbmdpZnkiLCJsb2dnZXIiLCJpbmZvIiwidGV4dCIsInNlbmRSZXF1ZXN0IiwiZXJyIiwiYXBpUmVzcG9uc2UiLCJzdGF0dXMiLCJtZXNzYWdlcyIsInNlbmRWaWFTaG9ydGNvZGUiLCJtZXNzYWdlUGFyYW1zIiwiT2JqZWN0Iiwia2V5cyIsInJlcGxhY2UiLCJmb3JFYWNoIiwia2V5IiwiSlNPTiIsInNob3J0Y29kZUFsZXJ0Iiwic2hvcnRjb2RlMkZBIiwic2hvcnRjb2RlTWFya2V0aW5nIiwiYSIsInBhcnNlIiwiZ2V0RW5kcG9pbnQiLCJhY3Rpb24iLCJlbmRwb2ludCIsIm1ldGhvZCIsImluZGV4T2YiLCJodHRwQ2xpZW50IiwicmVxdWVzdCIsImNoZWNrQmFsYW5jZSIsImJhbGFuY2VFbmRwb2ludCIsImdldFByaWNpbmciLCJjb3VudHJ5Q29kZSIsImxlbmd0aCIsInByaWNpbmdFbmRwb2ludCIsImdldFBob25lUHJpY2luZyIsImdldE51bWJlcnMiLCJudW1iZXJzRW5kcG9pbnQiLCJzZWFyY2hOdW1iZXJzIiwicGF0dGVybiIsInNlYXJjaEVuZHBvaW50IiwiYXJnIiwiYnV5TnVtYmVyIiwiYnV5RW5kcG9pbnQiLCJjYW5jZWxOdW1iZXIiLCJjYW5jZWxFbmRwb2ludCIsInVwZGF0ZU51bWJlciIsInBhcmFtcyIsInVwZGF0ZUVuZHBvaW50IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZ2V0QXBwbGljYXRpb25zIiwiY3JlYXRlQXBwbGljYXRpb24iLCJuYW1lIiwiZXZlbnRVcmwiLCJjcmVhdGVFbmRwb2ludCIsImdldEFwcGxpY2F0aW9uIiwiYXBwSWQiLCJzaG93RW5kcG9pbnQiLCJ1cGRhdGVBcHBsaWNhdGlvbiIsImRlbGV0ZUFwcGxpY2F0aW9uIiwiZGVsZXRlRW5kcG9pbnQiLCJjaGFuZ2VQYXNzd29yZCIsIm5ld1NlY3JldCIsInNldHRpbmdzRW5kcG9pbnQiLCJjaGFuZ2VNb0NhbGxiYWNrVXJsIiwibmV3VXJsIiwiY2hhbmdlRHJDYWxsYmFja1VybCIsInZlcmlmeU51bWJlciIsImlucHV0UGFyYW1zIiwibnVtYmVyIiwiYnJhbmQiLCJ2RW5kcG9pbnQiLCJjaGVja1ZlcmlmeVJlcXVlc3QiLCJyZXF1ZXN0X2lkIiwiY29kZSIsImNvbnRyb2xWZXJpZnlSZXF1ZXN0IiwiY21kIiwic2VhcmNoVmVyaWZ5UmVxdWVzdCIsInJlcXVlc3RJZHMiLCJyZXF1ZXN0SWRQYXJhbSIsIkFycmF5IiwiaXNBcnJheSIsInJlcXVlc3RfaWRzIiwibnVtYmVySW5zaWdodCIsIm51bWJlckluc2lnaHRBc3luYyIsIm51bWJlckluc2lnaHRCYXNpYyIsIm51bWJlckluc2lnaHRDb21tb24iLCJudW1iZXJJbnNpZ2h0U3RhbmRhcmQiLCJudW1iZXJJbnNpZ2h0QWR2YW5jZWQiLCJudW1iZXJJbnNpZ2h0QWR2YW5jZWRBc3luYyIsIm5FbmRwb2ludCIsInZhbGlkYXRlTnVtYmVyIiwiaW5wdXRPYmoiLCJ0ZXN0Iiwic2VuZFZvaWNlTWVzc2FnZSIsInZvaWNlRW5kcG9pbnQiLCJzZW5kVFRTTWVzc2FnZSIsInNlbmRUVFNQcm9tcHRXaXRoQ2FwdHVyZSIsImlzTmFOIiwic2VuZFRUU1Byb21wdFdpdGhDb25maXJtIiwiY2FsbCIsInJldHVybkRhdGEiLCJnZXRXaXRoUXVlcnkiLCJxdWVyeSIsImNyZWRzIiwicGF0aEV4dCIsImNvbmZpZyIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiZ2VuZXJhdGVKd3QiLCJzZXRIb3N0IiwiYUhvc3QiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBRUEsSUFBSUEsY0FBY0MsUUFBUSxhQUFSLENB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QUVELE1BQUlHLFNBQVM7QUFDWGpMLFVBQU0sZUFESztBQUVYQyxlQUFTQSxJQUFULEdBQWdCK0ssT0FGTDtBQUdYaEYsWUFBUSxLQUhHO0FBSVhrRixhQUFTO0FBQ1Asc0JBQWdCLGtCQURUO0FBRVBDLGlDQUF5QkosTUFBTUssV0FBTjtBQUZsQjtBQUpFLEdBQWI7QUFTQWhILE9BQUs4QixVQUFMLENBQWdCQyxPQUFoQixDQUF3QjhFLE1BQXhCLEVBQWdDdkgsUUFBaEM7QUFDRCxDQXhCRDs7QUEwQkFULFFBQVFvSSxPQUFSLEdBQWtCLFVBQVNDLEtBQVQsRUFBZ0I7QUFDaEN2TCxVQUFRQyxJQUFSLEdBQWVzTCxLQUFmO0FBQ0FwTCxnQkFBY0YsSUFBZCxHQUFxQnNMLEtBQXJCO0FBQ0FuTCxjQUFZSCxJQUFaLEdBQW1Cc0wsS0FBbkI7QUFDQWxMLG9CQUFrQkosSUFBbEIsR0FBeUJzTCxLQUF6QjtBQUNBakwsZUFBYUwsSUFBYixHQUFvQnNMLEtBQXBCO0FBQ0FoTCxpQkFBZU4sSUFBZixHQUFzQnNMLEtBQXRCO0FBQ0EvSyxzQkFBb0JQLElBQXBCLEdBQTJCc0wsS0FBM0I7QUFDQTlLLHdCQUFzQlIsSUFBdEIsR0FBNkJzTCxLQUE3QjtBQUNBN0ssdUJBQXFCVCxJQUFyQixHQUE0QnNMLEtBQTVCO0FBQ0E1SyxhQUFXVixJQUFYLEdBQWtCc0wsS0FBbEI7QUFDQTNLLGtCQUFnQlgsSUFBaEIsR0FBdUJzTCxLQUF2QjtBQUNBMUsscUJBQW1CWixJQUFuQixHQUEwQnNMLEtBQTFCO0FBQ0F4Syx1QkFBcUJkLElBQXJCLEdBQTRCc0wsS0FBNUI7QUFDRCxDQWREIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBxdWVyeXN0cmluZyA9IHJlcXVpcmUoXCJxdWVyeXN0cmluZ1wiKTtcblxudmFyIG1zZ3BhdGggPSB7IGhvc3Q6IFwicmVzdC5uZXhtby5jb21cIiwgcGF0aDogXCIvc21zL2pzb25cIiB9O1xudmFyIHNob3J0Y29kZVBhdGggPSB7IGhvc3Q6IFwicmVzdC5uZXhtby5jb21cIiwgcGF0aDogXCIvc2MvdXMvJHt0eXBlfS9qc29uXCIgfTtcbnZhciB0dHNFbmRwb2ludCA9IHsgaG9zdDogXCJhcGkubmV4bW8uY29tXCIsIHBhdGg6IFwiL3R0cy9qc29uXCIgfTtcbnZhciB0dHNQcm9tcHRFbmRwb2ludCA9IHsgaG9zdDogXCJhcGkubmV4bW8uY29tXCIsIHBhdGg6IFwiL3R0cy1wcm9tcHQvanNvblwiIH07XG52YXIgY2FsbEVuZHBvaW50ID0geyBob3N0OiBcInJlc3QubmV4bW8uY29tXCIsIHBhdGg6IFwiL2NhbGwvanNvblwiIH07XG52YXIgdmVyaWZ5RW5kcG9pbnQgPSB7IGhvc3Q6IFwiYXBpLm5leG1vLmNvbVwiLCBwYXRoOiBcIi92ZXJpZnkvanNvblwiIH07XG52YXIgY2hlY2tWZXJpZnlFbmRwb2ludCA9IHsgaG9zdDogXCJhcGkubmV4bW8uY29tXCIsIHBhdGg6IFwiL3ZlcmlmeS9jaGVjay9qc29uXCIgfTtcbnZhciBjb250cm9sVmVyaWZ5RW5kcG9pbnQgPSB7XG4gIGhvc3Q6IFwiYXBpLm5leG1vLmNvbVwiLFxuICBwYXRoOiBcIi92ZXJpZnkvY29udHJvbC9qc29uXCJcbn07XG52YXIgc2VhcmNoVmVyaWZ5RW5kcG9pbnQgPSB7XG4gIGhvc3Q6IFwiYXBpLm5leG1vLmNvbVwiLFxuICBwYXRoOiBcIi92ZXJpZnkvc2VhcmNoL2pzb25cIlxufTtcbnZhciBuaUVuZHBvaW50ID0geyBob3N0OiBcImFwaS5uZXhtby5jb21cIiwgcGF0aDogXCIvbmkvYWR2YW5jZWQvYXN5bmMvanNvblwiIH07XG52YXIgbmlCYXNpY0VuZHBvaW50ID0geyBob3N0OiBcImFwaS5uZXhtby5jb21cIiwgcGF0aDogXCIvbmkvYmFzaWMvanNvblwiIH07XG52YXIgbmlTdGFuZGFyZEVuZHBvaW50ID0geyBob3N0OiBcImFwaS5uZXhtby5jb21cIiwgcGF0aDogXCIvbmkvc3RhbmRhcmQvanNvblwiIH07XG52YXIgbmlBZHZhbmNlZEVuZHBvaW50ID0geyBob3N0OiBcImFwaS5uZXhtby5jb21cIiwgcGF0aDogXCIvbmkvYWR2YW5jZWQvanNvblwiIH07XG52YXIgYXBwbGljYXRpb25zRW5kcG9pbnQgPSB7IGhvc3Q6IFwiYXBpLm5leG1vLmNvbVwiLCBwYXRoOiBcIi92MS9hcHBsaWNhdGlvbnNcIiB9O1xudmFyIHVwID0ge307XG52YXIgbnVtYmVyUGF0dGVybiA9IG5ldyBSZWdFeHAoXCJeWzAtOSArKCktXSokXCIpO1xuXG52YXIgX29wdGlvbnMgPSBudWxsO1xuXG4vLyBFcnJvciBtZXNzYWdlIHJlc291cmNlcyBhcmUgbWFpbnRhaW5lZCBnbG9iYWxseSBpbiBvbmUgcGxhY2UgZm9yIGVhc3kgbWFuYWdlbWVudFxudmFyIEVSUk9SX01FU1NBR0VTID0ge1xuICBzZW5kZXI6IFwiSW52YWxpZCBmcm9tIGFkZHJlc3NcIixcbiAgdG86IFwiSW52YWxpZCB0byBhZGRyZXNzXCIsXG4gIG1zZzogXCJJbnZhbGlkIFRleHQgTWVzc2FnZVwiLFxuICBtc2dQYXJhbXM6IFwiSW52YWxpZCBzaG9ydGNvZGUgbWVzc2FnZSBwYXJhbWV0ZXJzXCIsXG4gIGNvdW50cnljb2RlOiBcIkludmFsaWQgQ291bnRyeSBDb2RlXCIsXG4gIG1zaXNkbjogXCJJbnZhbGlkIE1TSVNETiBwYXNzZWRcIixcbiAgYm9keTogXCJJbnZhbGlkIEJvZHkgdmFsdWUgaW4gQmluYXJ5IE1lc3NhZ2VcIixcbiAgdWRoOiBcIkludmFsaWQgdWRoIHZhbHVlIGluIEJpbmFyeSBNZXNzYWdlXCIsXG4gIHRpdGxlOiBcIkludmFsaWQgdGl0bGUgaW4gV0FQIFB1c2ggbWVzc2FnZVwiLFxuICB1cmw6IFwiSW52YWxpZCB1cmwgaW4gV0FQIFB1c2ggbWVzc2FnZVwiLFxuICBtYXhEaWdpdHM6IFwiSW52YWxpZCBtYXggZGlnaXRzIGZvciBUVFMgcHJvbXB0XCIsXG4gIGJ5ZVRleHQ6IFwiSW52YWxpZCBieWUgdGV4dCBmb3IgVFRTIHByb21wdFwiLFxuICBwaW5Db2RlOiBcIkludmFsaWQgcGluIGNvZGUgZm9yIFRUUyBjb25maXJtXCIsXG4gIGZhaWxlZFRleHQ6IFwiSW52YWxpZCBmYWlsZWQgdGV4dCBmb3IgVFRTIGNvbmZpcm1cIixcbiAgYW5zd2VyVXJsOiBcIkludmFsaWQgYW5zd2VyIFVSTCBmb3IgY2FsbFwiLFxuICB2ZXJpZnlWYWxpZGF0aW9uOiBcIk1pc3NpbmcgTWFuZGF0b3J5IGZpZWxkcyAobnVtYmVyIGFuZC9vciBicmFuZClcIixcbiAgY2hlY2tWZXJpZnlWYWxpZGF0aW9uOiBcIk1pc3NpbmcgTWFuZGF0b3J5IGZpZWxkcyAocmVxdWVzdF9pZCBhbmQvb3IgY29kZSlcIixcbiAgY29udHJvbFZlcmlmeVZhbGlkYXRpb246XG4gICAgXCJNaXNzaW5nIE1hbmRhdG9yeSBmaWVsZHMgKHJlcXVlc3RfaWQgYW5kL29yIGNtZC1jb21tYW5kKVwiLFxuICBzZWFyY2hWZXJpZnlWYWxpZGF0aW9uOlxuICAgIFwiTWlzc2luZyBNYW5kYXRvcnkgZmllbGRzIChyZXF1ZXN0X2lkIG9yIHJlcXVlc3RfaWRzKVwiLFxuICBudW1iZXJJbnNpZ2h0QWR2YW5jZWRWYWxpZGF0aW9uOlxuICAgIFwiTWlzc2luZyBNYW5kYXRvcnkgZmllbGRzIChudW1iZXIgYW5kL29yIGNhbGxiYWNrIHVybClcIixcbiAgbnVtYmVySW5zaWdodFZhbGlkYXRpb246IFwiTWlzc2luZyBNYW5kYXRvcnkgZmllbGQgLSBudW1iZXJcIixcbiAgbnVtYmVySW5zaWdodFBhdHRlcm5GYWlsdXJlOlxuICAgIFwiTnVtYmVyIGNhbiBjb250YWluIGRpZ2l0cyBhbmQgbWF5IGluY2x1ZGUgYW55IG9yIGFsbCBvZiB0aGUgZm9sbG93aW5nOiB3aGl0ZSBzcGFjZSwgLSwrLCAoLCApLlwiLFxuICBvcHRpb25zTm90QW5PYmplY3Q6XG4gICAgXCJPcHRpb25zIHBhcmFtZXRlciBzaG91bGQgYmUgYSBkaWN0aW9uYXJ5LiBDaGVjayB0aGUgZG9jcyBmb3IgdmFsaWQgcHJvcGVydGllcyBmb3Igb3B0aW9uc1wiLFxuICBhcHBsaWNhdGlvbk5hbWU6IFwiSW52YWxpZCBhcmd1bWVudDogbmFtZVwiLFxuICBhcHBsaWNhdGlvblR5cGU6IFwiSW52YWxpZCBhcmd1bWVudDogdHlwZVwiLFxuICBhcHBsaWNhdGlvbkFuc3dlclVybDogXCJJbnZhbGlkIGFyZ3VtZW50OiBhbnN3ZXJVcmxcIixcbiAgYXBwbGljYXRpb25FdmVudFVybDogXCJJbnZhbGlkIGFyZ3VtZW50OiBldmVudFVybFwiLFxuICBhcHBsaWNhdGlvbklkOiBcIkludmFsaWQgYXJndW1lbnQ6IGFwcElkXCIsXG4gIHByb2R1Y3Q6IFwiSW52YWxpZCBwcm9kdWN0LiBTaG91bGQgYmUgb25lIG9mIFt2b2ljZSwgc21zXVwiXG59O1xuXG5leHBvcnRzLmluaXRpYWxpemUgPSBmdW5jdGlvbihwa2V5LCBwc2VjcmV0LCBvcHRpb25zKSB7XG4gIC8vIFRoZXNlIGNhbiBkZWZhdWx0IHRvIGVtcHR5IGFzIHdlIG1heSBwcm92aWRlIGEgcHJpdmF0ZSBrZXkgZm9yIEpXVCBhdXRoXG4gIC8vIEluIHRoYXQgc2l0dWF0aW9uLCBwcml2YXRlIGtleSBhbmQgc2VjcmV0IGFyZSBub3QgcmVxdWlyZWQuIElmIHlvdSBkb24ndCBwcm92aWRlXG4gIC8vIEEga2V5L3NlY3JldCBhbmQgdHJ5IGFuZCBtYWtlIGEgcmVxdWVzdCB5b3UnbGwgZ2V0IGEgNDAxIGVycm9yIGJhY2tcbiAgcGtleSA9IHBrZXkgfHwgXCJcIjtcbiAgcHNlY3JldCA9IHBzZWNyZXQgfHwgXCJcIjtcblxuICB1cCA9IHtcbiAgICBhcGlfa2V5OiBwa2V5LFxuICAgIGFwaV9zZWNyZXQ6IHBzZWNyZXRcbiAgfTtcbiAgX29wdGlvbnMgPSBvcHRpb25zO1xufTtcblxuZXhwb3J0cy5zZW5kQmluYXJ5TWVzc2FnZSA9IGZ1bmN0aW9uKHNlbmRlciwgcmVjaXBpZW50LCBib2R5LCB1ZGgsIGNhbGxiYWNrKSB7XG4gIGlmICghYm9keSkge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmJvZHkpKTtcbiAgfSBlbHNlIGlmICghdWRoKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudWRoKSk7XG4gIH0gZWxzZSB7XG4gICAgc2VuZE1lc3NhZ2UoXG4gICAgICB7XG4gICAgICAgIGZyb206IHNlbmRlcixcbiAgICAgICAgdG86IHJlY2lwaWVudCxcbiAgICAgICAgdHlwZTogXCJiaW5hcnlcIixcbiAgICAgICAgYm9keTogYm9keSxcbiAgICAgICAgdWRoOiB1ZGhcbiAgICAgIH0sXG4gICAgICBjYWxsYmFja1xuICAgICk7XG4gIH1cbn07XG5cbmV4cG9ydHMuc2VuZFdhcFB1c2hNZXNzYWdlID0gZnVuY3Rpb24oXG4gIHNlbmRlcixcbiAgcmVjaXBpZW50LFxuICB0aXRsZSxcbiAgdXJsLFxuICB2YWxpZGl0eSxcbiAgY2FsbGJhY2tcbikge1xuICBpZiAoIXRpdGxlKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudGl0bGUpKTtcbiAgfSBlbHNlIGlmICghdXJsKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudXJsKSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGVvZiB2YWxpZGl0eSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjYWxsYmFjayA9IHZhbGlkaXR5O1xuICAgICAgdmFsaWRpdHkgPSA4NjQwMDAwMDtcbiAgICB9XG4gICAgc2VuZE1lc3NhZ2UoXG4gICAgICB7XG4gICAgICAgIGZyb206IHNlbmRlcixcbiAgICAgICAgdG86IHJlY2lwaWVudCxcbiAgICAgICAgdHlwZTogXCJ3YXBwdXNoXCIsXG4gICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgdmFsaWRpdHk6IHZhbGlkaXR5LFxuICAgICAgICB1cmw6IHVybFxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrXG4gICAgKTtcbiAgfVxufTtcblxuZXhwb3J0cy5zZW5kVGV4dE1lc3NhZ2UgPSBmdW5jdGlvbihzZW5kZXIsIHJlY2lwaWVudCwgbWVzc2FnZSwgb3B0cywgY2FsbGJhY2spIHtcbiAgaWYgKCFtZXNzYWdlKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubXNnKSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2sgPSBvcHRzO1xuICAgICAgb3B0cyA9IHt9O1xuICAgIH1cbiAgICBvcHRzW1wiZnJvbVwiXSA9IHNlbmRlcjtcbiAgICBvcHRzW1widG9cIl0gPSByZWNpcGllbnQ7XG4gICAgb3B0c1tcInRleHRcIl0gPSBtZXNzYWdlO1xuICAgIHNlbmRNZXNzYWdlKG9wdHMsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuZXhwb3J0cy5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uKG9wdHMsIGNhbGxiYWNrKSB7XG4gIHNlbmRNZXNzYWdlKG9wdHMsIGNhbGxiYWNrKTtcbn07XG5mdW5jdGlvbiBzZW5kTWVzc2FnZShkYXRhLCBjYWxsYmFjaykge1xuICBpZiAoIWRhdGEuZnJvbSkge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLnNlbmRlcikpO1xuICB9IGVsc2UgaWYgKCFkYXRhLnRvKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudG8pKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcGF0aCA9IGNsb25lKG1zZ3BhdGgpO1xuICAgIHBhdGgucGF0aCArPSBcIj9cIiArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShkYXRhKTtcbiAgICBfb3B0aW9ucy5sb2dnZXIuaW5mbyhcbiAgICAgIFwic2VuZGluZyBtZXNzYWdlIGZyb20gXCIgK1xuICAgICAgICBkYXRhLmZyb20gK1xuICAgICAgICBcIiB0byBcIiArXG4gICAgICAgIGRhdGEudG8gK1xuICAgICAgICBcIiB3aXRoIG1lc3NhZ2UgXCIgK1xuICAgICAgICBkYXRhLnRleHRcbiAgICApO1xuICAgIHNlbmRSZXF1ZXN0KHBhdGgsIFwiUE9TVFwiLCBmdW5jdGlvbihlcnIsIGFwaVJlc3BvbnNlKSB7XG4gICAgICBpZiAoIWVyciAmJiBhcGlSZXNwb25zZS5zdGF0dXMgJiYgYXBpUmVzcG9uc2UubWVzc2FnZXNbMF0uc3RhdHVzID4gMCkge1xuICAgICAgICBzZW5kRXJyb3IoXG4gICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgICAgbmV3IEVycm9yKGFwaVJlc3BvbnNlLm1lc3NhZ2VzWzBdW1wiZXJyb3ItdGV4dFwiXSksXG4gICAgICAgICAgYXBpUmVzcG9uc2VcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyLCBhcGlSZXNwb25zZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2VuZFZpYVNob3J0Y29kZSh0eXBlLCByZWNpcGllbnQsIG1lc3NhZ2VQYXJhbXMsIG9wdHMsIGNhbGxiYWNrKSB7XG4gIGlmICghcmVjaXBpZW50KSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudG8pKTtcbiAgfVxuICBpZiAoIW1lc3NhZ2VQYXJhbXMgfHwgIU9iamVjdC5rZXlzKG1lc3NhZ2VQYXJhbXMpKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubXNnUGFyYW1zKSk7XG4gIH1cbiAgb3B0cyA9IG9wdHMgfHwge307XG4gIHZhciBwYXRoID0gY2xvbmUoc2hvcnRjb2RlUGF0aCk7XG4gIHBhdGgucGF0aCA9IHBhdGgucGF0aC5yZXBsYWNlKFwiJHt0eXBlfVwiLCB0eXBlKTtcbiAgT2JqZWN0LmtleXMobWVzc2FnZVBhcmFtcykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICBvcHRzW2tleV0gPSBtZXNzYWdlUGFyYW1zW2tleV07XG4gIH0pO1xuICBvcHRzLnRvID0gcmVjaXBpZW50O1xuICBwYXRoLnBhdGggKz0gXCI/XCIgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkob3B0cyk7XG4gIF9vcHRpb25zLmxvZ2dlci5pbmZvKFxuICAgIFwic2VuZGluZyBtZXNzYWdlIGZyb20gc2hvcnRjb2RlIFwiICtcbiAgICAgIHR5cGUgK1xuICAgICAgXCIgdG8gXCIgK1xuICAgICAgcmVjaXBpZW50ICtcbiAgICAgIFwiIHdpdGggcGFyYW1ldGVycyBcIiArXG4gICAgICBKU09OLnN0cmluZ2lmeShtZXNzYWdlUGFyYW1zKVxuICApO1xuICBzZW5kUmVxdWVzdChwYXRoLCBcIlBPU1RcIiwgZnVuY3Rpb24oZXJyLCBhcGlSZXNwb25zZSkge1xuICAgIGlmICghZXJyICYmIGFwaVJlc3BvbnNlLnN0YXR1cyAmJiBhcGlSZXNwb25zZS5tZXNzYWdlc1swXS5zdGF0dXMgPiAwKSB7XG4gICAgICBzZW5kRXJyb3IoXG4gICAgICAgIGNhbGxiYWNrLFxuICAgICAgICBuZXcgRXJyb3IoYXBpUmVzcG9uc2UubWVzc2FnZXNbMF1bXCJlcnJvci10ZXh0XCJdKSxcbiAgICAgICAgYXBpUmVzcG9uc2VcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyLCBhcGlSZXNwb25zZSk7XG4gICAgfVxuICB9KTtcbn1cbmV4cG9ydHMuc2hvcnRjb2RlQWxlcnQgPSBmdW5jdGlvbihyZWNpcGllbnQsIG1lc3NhZ2VQYXJhbXMsIG9wdHMsIGNhbGxiYWNrKSB7XG4gIHNlbmRWaWFTaG9ydGNvZGUoXCJhbGVydFwiLCByZWNpcGllbnQsIG1lc3NhZ2VQYXJhbXMsIG9wdHMsIGNhbGxiYWNrKTtcbn07XG5leHBvcnRzLnNob3J0Y29kZTJGQSA9IGZ1bmN0aW9uKHJlY2lwaWVudCwgbWVzc2FnZVBhcmFtcywgb3B0cywgY2FsbGJhY2spIHtcbiAgc2VuZFZpYVNob3J0Y29kZShcIjJmYVwiLCByZWNpcGllbnQsIG1lc3NhZ2VQYXJhbXMsIG9wdHMsIGNhbGxiYWNrKTtcbn07XG5leHBvcnRzLnNob3J0Y29kZU1hcmtldGluZyA9IGZ1bmN0aW9uKFxuICByZWNpcGllbnQsXG4gIG1lc3NhZ2VQYXJhbXMsXG4gIG9wdHMsXG4gIGNhbGxiYWNrXG4pIHtcbiAgc2VuZFZpYVNob3J0Y29kZShcIm1hcmtldGluZ1wiLCByZWNpcGllbnQsIG1lc3NhZ2VQYXJhbXMsIG9wdHMsIGNhbGxiYWNrKTtcbn07XG5cbmZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYSkpO1xufVxuXG5mdW5jdGlvbiBnZXRFbmRwb2ludChhY3Rpb24pIHtcbiAgcmV0dXJuIHsgcGF0aDogYWN0aW9uIH07XG59XG5cbmZ1bmN0aW9uIHNlbmRSZXF1ZXN0KGVuZHBvaW50LCBtZXRob2QsIGNhbGxiYWNrKSB7XG4gIGVuZHBvaW50LnBhdGggPVxuICAgIGVuZHBvaW50LnBhdGggK1xuICAgIChlbmRwb2ludC5wYXRoLmluZGV4T2YoXCI/XCIpID4gMCA/IFwiJlwiIDogXCI/XCIpICtcbiAgICBxdWVyeXN0cmluZy5zdHJpbmdpZnkodXApO1xuICBfb3B0aW9ucy5odHRwQ2xpZW50LnJlcXVlc3QoZW5kcG9pbnQsIG1ldGhvZCwgY2FsbGJhY2spO1xufVxuXG5leHBvcnRzLmNoZWNrQmFsYW5jZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciBiYWxhbmNlRW5kcG9pbnQgPSBnZXRFbmRwb2ludChcIi9hY2NvdW50L2dldC1iYWxhbmNlXCIpO1xuICBzZW5kUmVxdWVzdChiYWxhbmNlRW5kcG9pbnQsIGNhbGxiYWNrKTtcbn07XG5cbmV4cG9ydHMuZ2V0UHJpY2luZyA9IGZ1bmN0aW9uKGNvdW50cnlDb2RlLCBjYWxsYmFjaykge1xuICBpZiAoIWNvdW50cnlDb2RlIHx8IGNvdW50cnlDb2RlLmxlbmd0aCAhPT0gMikge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmNvdW50cnljb2RlKSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHByaWNpbmdFbmRwb2ludCA9IGdldEVuZHBvaW50KFwiL2FjY291bnQvZ2V0LXByaWNpbmcvb3V0Ym91bmRcIik7XG4gICAgcHJpY2luZ0VuZHBvaW50LnBhdGggKz0gXCI/Y291bnRyeT1cIiArIGNvdW50cnlDb2RlO1xuICAgIHNlbmRSZXF1ZXN0KHByaWNpbmdFbmRwb2ludCwgY2FsbGJhY2spO1xuICB9XG59O1xuXG5leHBvcnRzLmdldFBob25lUHJpY2luZyA9IGZ1bmN0aW9uKHByb2R1Y3QsIG1zaXNkbiwgY2FsbGJhY2spIHtcbiAgaWYgKCFwcm9kdWN0IHx8IChwcm9kdWN0ICE9IFwic21zXCIgJiYgcHJvZHVjdCAhPSBcInZvaWNlXCIpKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMucHJvZHVjdCkpO1xuICB9IGVsc2UgaWYgKCFtc2lzZG4pIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5tc2lzZG4pKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcHJpY2luZ0VuZHBvaW50ID0gZ2V0RW5kcG9pbnQoXCIvYWNjb3VudC9nZXQtcGhvbmUtcHJpY2luZy9vdXRib3VuZFwiKTtcbiAgICBwcmljaW5nRW5kcG9pbnQucGF0aCArPVxuICAgICAgXCIvXCIgKyBwcm9kdWN0ICsgXCIvXCIgKyB1cC5hcGlfa2V5ICsgXCIvXCIgKyB1cC5hcGlfc2VjcmV0ICsgXCIvXCIgKyBtc2lzZG47XG4gICAgc2VuZFJlcXVlc3QocHJpY2luZ0VuZHBvaW50LCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbmV4cG9ydHMuZ2V0TnVtYmVycyA9IGZ1bmN0aW9uKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIHZhciBudW1iZXJzRW5kcG9pbnQgPSBnZXRFbmRwb2ludChcIi9hY2NvdW50L251bWJlcnNcIik7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiKSB7XG4gICAgbnVtYmVyc0VuZHBvaW50LnBhdGggPSBudW1iZXJzRW5kcG9pbnQucGF0aCArIFwiP1wiO1xuICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XG4gICAgICBudW1iZXJzRW5kcG9pbnQucGF0aCA9XG4gICAgICAgIG51bWJlcnNFbmRwb2ludC5wYXRoICsga2V5ICsgXCI9XCIgKyBvcHRpb25zW2tleV0gKyBcIiZcIjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMub3B0aW9uc05vdEFuT2JqZWN0KSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNlbmRSZXF1ZXN0KG51bWJlcnNFbmRwb2ludCwgY2FsbGJhY2spO1xufTtcblxuZXhwb3J0cy5zZWFyY2hOdW1iZXJzID0gZnVuY3Rpb24oY291bnRyeUNvZGUsIHBhdHRlcm4sIGNhbGxiYWNrKSB7XG4gIGlmICghY291bnRyeUNvZGUgfHwgY291bnRyeUNvZGUubGVuZ3RoICE9PSAyKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuY291bnRyeWNvZGUpKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2VhcmNoRW5kcG9pbnQgPSBnZXRFbmRwb2ludChcIi9udW1iZXIvc2VhcmNoXCIpO1xuICAgIHNlYXJjaEVuZHBvaW50LnBhdGggKz0gXCI/Y291bnRyeT1cIiArIGNvdW50cnlDb2RlO1xuICAgIGlmICh0eXBlb2YgcGF0dGVybiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjYWxsYmFjayA9IHBhdHRlcm47XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgcGF0dGVybiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgc2VhcmNoRW5kcG9pbnQucGF0aCA9IHNlYXJjaEVuZHBvaW50LnBhdGggKyBcIiZcIjtcbiAgICAgIGZvciAodmFyIGFyZyBpbiBwYXR0ZXJuKSB7XG4gICAgICAgIHNlYXJjaEVuZHBvaW50LnBhdGggPVxuICAgICAgICAgIHNlYXJjaEVuZHBvaW50LnBhdGggKyBhcmcgKyBcIj1cIiArIHBhdHRlcm5bYXJnXSArIFwiJlwiO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzZWFyY2hFbmRwb2ludC5wYXRoID0gc2VhcmNoRW5kcG9pbnQucGF0aCArIFwiJnBhdHRlcm49XCIgKyBwYXR0ZXJuO1xuICAgIH1cbiAgICBzZW5kUmVxdWVzdChzZWFyY2hFbmRwb2ludCwgY2FsbGJhY2spO1xuICB9XG59O1xuXG5leHBvcnRzLmJ1eU51bWJlciA9IGZ1bmN0aW9uKGNvdW50cnlDb2RlLCBtc2lzZG4sIGNhbGxiYWNrKSB7XG4gIGlmICghY291bnRyeUNvZGUgfHwgY291bnRyeUNvZGUubGVuZ3RoICE9IDIpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5jb3VudHJ5Y29kZSkpO1xuICB9IGVsc2UgaWYgKCFtc2lzZG4pIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5tc2lzZG4pKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgYnV5RW5kcG9pbnQgPSBnZXRFbmRwb2ludChcIi9udW1iZXIvYnV5XCIpO1xuICAgIGJ1eUVuZHBvaW50LnBhdGggKz0gXCI/Y291bnRyeT1cIiArIGNvdW50cnlDb2RlICsgXCImbXNpc2RuPVwiICsgbXNpc2RuO1xuICAgIHNlbmRSZXF1ZXN0KGJ1eUVuZHBvaW50LCBcIlBPU1RcIiwgY2FsbGJhY2spO1xuICB9XG59O1xuXG5leHBvcnRzLmNhbmNlbE51bWJlciA9IGZ1bmN0aW9uKGNvdW50cnlDb2RlLCBtc2lzZG4sIGNhbGxiYWNrKSB7XG4gIGlmICghY291bnRyeUNvZGUgfHwgY291bnRyeUNvZGUubGVuZ3RoICE9PSAyKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuY291bnRyeWNvZGUpKTtcbiAgfSBlbHNlIGlmICghbXNpc2RuKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubXNpc2RuKSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNhbmNlbEVuZHBvaW50ID0gZ2V0RW5kcG9pbnQoXCIvbnVtYmVyL2NhbmNlbFwiKTtcbiAgICBjYW5jZWxFbmRwb2ludC5wYXRoICs9IFwiP2NvdW50cnk9XCIgKyBjb3VudHJ5Q29kZSArIFwiJm1zaXNkbj1cIiArIG1zaXNkbjtcbiAgICBzZW5kUmVxdWVzdChjYW5jZWxFbmRwb2ludCwgXCJQT1NUXCIsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuZXhwb3J0cy5jYW5jZWxOdW1iZXIgPSBmdW5jdGlvbihjb3VudHJ5Q29kZSwgbXNpc2RuLCBjYWxsYmFjaykge1xuICBpZiAoIWNvdW50cnlDb2RlIHx8IGNvdW50cnlDb2RlLmxlbmd0aCAhPT0gMikge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmNvdW50cnljb2RlKSk7XG4gIH0gZWxzZSBpZiAoIW1zaXNkbikge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm1zaXNkbikpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjYW5jZWxFbmRwb2ludCA9IGdldEVuZHBvaW50KFwiL251bWJlci9jYW5jZWxcIik7XG4gICAgY2FuY2VsRW5kcG9pbnQucGF0aCArPSBcIj9jb3VudHJ5PVwiICsgY291bnRyeUNvZGUgKyBcIiZtc2lzZG49XCIgKyBtc2lzZG47XG4gICAgc2VuZFJlcXVlc3QoY2FuY2VsRW5kcG9pbnQsIFwiUE9TVFwiLCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbmV4cG9ydHMudXBkYXRlTnVtYmVyID0gZnVuY3Rpb24oY291bnRyeUNvZGUsIG1zaXNkbiwgcGFyYW1zLCBjYWxsYmFjaykge1xuICBpZiAoIWNvdW50cnlDb2RlIHx8IGNvdW50cnlDb2RlLmxlbmd0aCAhPT0gMikge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmNvdW50cnljb2RlKSk7XG4gIH0gZWxzZSBpZiAoIW1zaXNkbikge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm1zaXNkbikpO1xuICB9IGVsc2Uge1xuICAgIHZhciB1cGRhdGVFbmRwb2ludCA9IGdldEVuZHBvaW50KFwiL251bWJlci91cGRhdGVcIik7XG4gICAgdXBkYXRlRW5kcG9pbnQucGF0aCArPSBcIj9jb3VudHJ5PVwiICsgY291bnRyeUNvZGUgKyBcIiZtc2lzZG49XCIgKyBtc2lzZG47XG4gICAgdXBkYXRlRW5kcG9pbnQucGF0aCA9IHVwZGF0ZUVuZHBvaW50LnBhdGggKyBcIiZcIjtcbiAgICBmb3IgKHZhciBhcmcgaW4gcGFyYW1zKSB7XG4gICAgICB1cGRhdGVFbmRwb2ludC5wYXRoID1cbiAgICAgICAgdXBkYXRlRW5kcG9pbnQucGF0aCArIGFyZyArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1thcmddKSArIFwiJlwiO1xuICAgIH1cbiAgICBzZW5kUmVxdWVzdCh1cGRhdGVFbmRwb2ludCwgXCJQT1NUXCIsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuZXhwb3J0cy5nZXRBcHBsaWNhdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICB2YXIgZW5kcG9pbnQgPSBnZXRFbmRwb2ludChhcHBsaWNhdGlvbnNFbmRwb2ludC5wYXRoKTtcbiAgZW5kcG9pbnQuaG9zdCA9IGFwcGxpY2F0aW9uc0VuZHBvaW50Lmhvc3Q7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiKSB7XG4gICAgZW5kcG9pbnQucGF0aCArPSBcIj9cIjtcbiAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucykge1xuICAgICAgZW5kcG9pbnQucGF0aCArPSBrZXkgKyBcIj1cIiArIG9wdGlvbnNba2V5XSArIFwiJlwiO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5vcHRpb25zTm90QW5PYmplY3QpKTtcbiAgICByZXR1cm47XG4gIH1cbiAgc2VuZFJlcXVlc3QoZW5kcG9pbnQsIGNhbGxiYWNrKTtcbn07XG5cbmV4cG9ydHMuY3JlYXRlQXBwbGljYXRpb24gPSBmdW5jdGlvbihcbiAgbmFtZSxcbiAgdHlwZSxcbiAgYW5zd2VyVXJsLFxuICBldmVudFVybCxcbiAgb3B0aW9ucyxcbiAgY2FsbGJhY2tcbikge1xuICBpZiAoIW5hbWUgfHwgbmFtZS5sZW5ndGggPCAxKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuYXBwbGljYXRpb25OYW1lKSk7XG4gIH0gZWxzZSBpZiAoIXR5cGUpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5hcHBsaWNhdGlvblR5cGUpKTtcbiAgfSBlbHNlIGlmICghYW5zd2VyVXJsKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuYXBwbGljYXRpb25BbnN3ZXJVcmwpKTtcbiAgfSBlbHNlIGlmICghZXZlbnRVcmwpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5hcHBsaWNhdGlvbkV2ZW50VXJsKSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNyZWF0ZUVuZHBvaW50ID0gZ2V0RW5kcG9pbnQoYXBwbGljYXRpb25zRW5kcG9pbnQucGF0aCk7XG4gICAgY3JlYXRlRW5kcG9pbnQuaG9zdCA9IGFwcGxpY2F0aW9uc0VuZHBvaW50Lmhvc3Q7XG4gICAgY3JlYXRlRW5kcG9pbnQucGF0aCArPVxuICAgICAgXCI/bmFtZT1cIiArXG4gICAgICBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgK1xuICAgICAgXCImdHlwZT1cIiArXG4gICAgICB0eXBlICtcbiAgICAgIFwiJmFuc3dlcl91cmw9XCIgK1xuICAgICAgYW5zd2VyVXJsICtcbiAgICAgIFwiJmV2ZW50X3VybD1cIiArXG4gICAgICBldmVudFVybDtcbiAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucykge1xuICAgICAgY3JlYXRlRW5kcG9pbnQucGF0aCArPSBcIiZcIiArIGtleSArIFwiPVwiICsgb3B0aW9uc1trZXldO1xuICAgIH1cbiAgICBzZW5kUmVxdWVzdChjcmVhdGVFbmRwb2ludCwgXCJQT1NUXCIsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuZXhwb3J0cy5nZXRBcHBsaWNhdGlvbiA9IGZ1bmN0aW9uKGFwcElkLCBjYWxsYmFjaykge1xuICBpZiAoIWFwcElkIHx8IGFwcElkLmxlbmd0aCA8IDM2KSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuYXBwbGljYXRpb25JZCkpO1xuICB9IGVsc2Uge1xuICAgIHZhciBzaG93RW5kcG9pbnQgPSBnZXRFbmRwb2ludChhcHBsaWNhdGlvbnNFbmRwb2ludC5wYXRoICsgXCIvXCIgKyBhcHBJZCk7XG4gICAgc2hvd0VuZHBvaW50Lmhvc3QgPSBhcHBsaWNhdGlvbnNFbmRwb2ludC5ob3N0O1xuICAgIHNlbmRSZXF1ZXN0KHNob3dFbmRwb2ludCwgY2FsbGJhY2spO1xuICB9XG59O1xuXG5leHBvcnRzLnVwZGF0ZUFwcGxpY2F0aW9uID0gZnVuY3Rpb24oXG4gIGFwcElkLFxuICBuYW1lLFxuICB0eXBlLFxuICBhbnN3ZXJVcmwsXG4gIGV2ZW50VXJsLFxuICBvcHRpb25zLFxuICBjYWxsYmFja1xuKSB7XG4gIGlmICghYXBwSWQgfHwgYXBwSWQubGVuZ3RoIDwgMzYpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5hcHBsaWNhdGlvbklkKSk7XG4gIH0gZWxzZSBpZiAoIW5hbWUgfHwgbmFtZS5sZW5ndGggPCAxKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuYXBwbGljYXRpb25OYW1lKSk7XG4gIH0gZWxzZSBpZiAoIXR5cGUpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5hcHBsaWNhdGlvblR5cGUpKTtcbiAgfSBlbHNlIGlmICghYW5zd2VyVXJsKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuYXBwbGljYXRpb25BbnN3ZXJVcmwpKTtcbiAgfSBlbHNlIGlmICghZXZlbnRVcmwpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5hcHBsaWNhdGlvbkV2ZW50VXJsKSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHVwZGF0ZUVuZHBvaW50ID0gZ2V0RW5kcG9pbnQoYXBwbGljYXRpb25zRW5kcG9pbnQucGF0aCArIFwiL1wiICsgYXBwSWQpO1xuICAgIHVwZGF0ZUVuZHBvaW50LnBhdGggKz1cbiAgICAgIFwiP25hbWU9XCIgK1xuICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICtcbiAgICAgIFwiJnR5cGU9XCIgK1xuICAgICAgdHlwZSArXG4gICAgICBcIiZhbnN3ZXJfdXJsPVwiICtcbiAgICAgIGFuc3dlclVybCArXG4gICAgICBcIiZldmVudF91cmw9XCIgK1xuICAgICAgZXZlbnRVcmw7XG4gICAgdXBkYXRlRW5kcG9pbnQuaG9zdCA9IGFwcGxpY2F0aW9uc0VuZHBvaW50Lmhvc3Q7XG4gICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMpIHtcbiAgICAgIHVwZGF0ZUVuZHBvaW50LnBhdGggPVxuICAgICAgICB1cGRhdGVFbmRwb2ludC5wYXRoICsgXCImXCIgKyBrZXkgKyBcIj1cIiArIG9wdGlvbnNba2V5XTtcbiAgICB9XG4gICAgc2VuZFJlcXVlc3QodXBkYXRlRW5kcG9pbnQsIFwiUFVUXCIsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuZXhwb3J0cy5kZWxldGVBcHBsaWNhdGlvbiA9IGZ1bmN0aW9uKGFwcElkLCBjYWxsYmFjaykge1xuICBpZiAoIWFwcElkIHx8IGFwcElkLmxlbmd0aCA8IDM2KSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuYXBwbGljYXRpb25JZCkpO1xuICB9IGVsc2Uge1xuICAgIHZhciBkZWxldGVFbmRwb2ludCA9IGdldEVuZHBvaW50KGFwcGxpY2F0aW9uc0VuZHBvaW50LnBhdGggKyBcIi9cIiArIGFwcElkKTtcbiAgICBkZWxldGVFbmRwb2ludC5ob3N0ID0gYXBwbGljYXRpb25zRW5kcG9pbnQuaG9zdDtcbiAgICBzZW5kUmVxdWVzdChkZWxldGVFbmRwb2ludCwgXCJERUxFVEVcIiwgY2FsbGJhY2spO1xuICB9XG59O1xuXG5leHBvcnRzLmNoYW5nZVBhc3N3b3JkID0gZnVuY3Rpb24obmV3U2VjcmV0LCBjYWxsYmFjaykge1xuICB2YXIgc2V0dGluZ3NFbmRwb2ludCA9IGdldEVuZHBvaW50KFwiL2FjY291bnQvc2V0dGluZ3NcIik7XG4gIHNldHRpbmdzRW5kcG9pbnQucGF0aCArPSBcIj9uZXdTZWNyZXQ9XCIgKyBlbmNvZGVVUklDb21wb25lbnQobmV3U2VjcmV0KTtcbiAgc2VuZFJlcXVlc3Qoc2V0dGluZ3NFbmRwb2ludCwgXCJQT1NUXCIsIGNhbGxiYWNrKTtcbn07XG5cbmV4cG9ydHMuY2hhbmdlTW9DYWxsYmFja1VybCA9IGZ1bmN0aW9uKG5ld1VybCwgY2FsbGJhY2spIHtcbiAgdmFyIHNldHRpbmdzRW5kcG9pbnQgPSBnZXRFbmRwb2ludChcIi9hY2NvdW50L3NldHRpbmdzXCIpO1xuICBzZXR0aW5nc0VuZHBvaW50LnBhdGggKz0gXCI/bW9DYWxsQmFja1VybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChuZXdVcmwpO1xuICBzZW5kUmVxdWVzdChzZXR0aW5nc0VuZHBvaW50LCBcIlBPU1RcIiwgY2FsbGJhY2spO1xufTtcblxuZXhwb3J0cy5jaGFuZ2VEckNhbGxiYWNrVXJsID0gZnVuY3Rpb24obmV3VXJsLCBjYWxsYmFjaykge1xuICB2YXIgc2V0dGluZ3NFbmRwb2ludCA9IGdldEVuZHBvaW50KFwiL2FjY291bnQvc2V0dGluZ3NcIik7XG4gIHNldHRpbmdzRW5kcG9pbnQucGF0aCArPSBcIj9kckNhbGxCYWNrVXJsPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KG5ld1VybCk7XG4gIHNlbmRSZXF1ZXN0KHNldHRpbmdzRW5kcG9pbnQsIFwiUE9TVFwiLCBjYWxsYmFjayk7XG59O1xuXG5leHBvcnRzLnZlcmlmeU51bWJlciA9IGZ1bmN0aW9uKGlucHV0UGFyYW1zLCBjYWxsYmFjaykge1xuICBpZiAoIWlucHV0UGFyYW1zLm51bWJlciB8fCAhaW5wdXRQYXJhbXMuYnJhbmQpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy52ZXJpZnlWYWxpZGF0aW9uKSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHZFbmRwb2ludCA9IGNsb25lKHZlcmlmeUVuZHBvaW50KTtcbiAgICB2RW5kcG9pbnQucGF0aCArPSBcIj9cIiArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShpbnB1dFBhcmFtcyk7XG4gICAgc2VuZFJlcXVlc3QodkVuZHBvaW50LCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbmV4cG9ydHMuY2hlY2tWZXJpZnlSZXF1ZXN0ID0gZnVuY3Rpb24oaW5wdXRQYXJhbXMsIGNhbGxiYWNrKSB7XG4gIGlmICghaW5wdXRQYXJhbXMucmVxdWVzdF9pZCB8fCAhaW5wdXRQYXJhbXMuY29kZSkge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmNoZWNrVmVyaWZ5VmFsaWRhdGlvbikpO1xuICB9IGVsc2Uge1xuICAgIHZhciB2RW5kcG9pbnQgPSBjbG9uZShjaGVja1ZlcmlmeUVuZHBvaW50KTtcbiAgICB2RW5kcG9pbnQucGF0aCArPSBcIj9cIiArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShpbnB1dFBhcmFtcyk7XG4gICAgc2VuZFJlcXVlc3QodkVuZHBvaW50LCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbmV4cG9ydHMuY29udHJvbFZlcmlmeVJlcXVlc3QgPSBmdW5jdGlvbihpbnB1dFBhcmFtcywgY2FsbGJhY2spIHtcbiAgaWYgKCFpbnB1dFBhcmFtcy5yZXF1ZXN0X2lkIHx8ICFpbnB1dFBhcmFtcy5jbWQpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5jb250cm9sVmVyaWZ5VmFsaWRhdGlvbikpO1xuICB9IGVsc2Uge1xuICAgIHZhciB2RW5kcG9pbnQgPSBjbG9uZShjb250cm9sVmVyaWZ5RW5kcG9pbnQpO1xuICAgIHZFbmRwb2ludC5wYXRoICs9IFwiP1wiICsgcXVlcnlzdHJpbmcuc3RyaW5naWZ5KGlucHV0UGFyYW1zKTtcbiAgICBzZW5kUmVxdWVzdCh2RW5kcG9pbnQsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuZXhwb3J0cy5zZWFyY2hWZXJpZnlSZXF1ZXN0ID0gZnVuY3Rpb24ocmVxdWVzdElkcywgY2FsbGJhY2spIHtcbiAgdmFyIHJlcXVlc3RJZFBhcmFtID0ge307XG4gIGlmICghcmVxdWVzdElkcykge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLnNlYXJjaFZlcmlmeVZhbGlkYXRpb24pKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShyZXF1ZXN0SWRzKSkge1xuICAgICAgaWYgKHJlcXVlc3RJZHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJlcXVlc3RJZFBhcmFtLnJlcXVlc3RfaWQgPSByZXF1ZXN0SWRzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVxdWVzdElkUGFyYW0ucmVxdWVzdF9pZHMgPSByZXF1ZXN0SWRzO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXF1ZXN0SWRQYXJhbS5yZXF1ZXN0X2lkID0gcmVxdWVzdElkcztcbiAgICB9XG4gICAgdmFyIHZFbmRwb2ludCA9IGNsb25lKHNlYXJjaFZlcmlmeUVuZHBvaW50KTtcbiAgICB2RW5kcG9pbnQucGF0aCArPSBcIj9cIiArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShyZXF1ZXN0SWRQYXJhbSk7XG4gICAgc2VuZFJlcXVlc3QodkVuZHBvaW50LCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbmV4cG9ydHMubnVtYmVySW5zaWdodCA9IGZ1bmN0aW9uKGlucHV0UGFyYW1zLCBjYWxsYmFjaykge1xuICBudW1iZXJJbnNpZ2h0QXN5bmMoaW5wdXRQYXJhbXMsIGNhbGxiYWNrKTtcbn07XG5cbmV4cG9ydHMubnVtYmVySW5zaWdodEJhc2ljID0gZnVuY3Rpb24oaW5wdXRQYXJhbXMsIGNhbGxiYWNrKSB7XG4gIG51bWJlckluc2lnaHRDb21tb24obmlCYXNpY0VuZHBvaW50LCBpbnB1dFBhcmFtcywgY2FsbGJhY2spO1xufTtcblxuZXhwb3J0cy5udW1iZXJJbnNpZ2h0U3RhbmRhcmQgPSBmdW5jdGlvbihpbnB1dFBhcmFtcywgY2FsbGJhY2spIHtcbiAgbnVtYmVySW5zaWdodENvbW1vbihuaVN0YW5kYXJkRW5kcG9pbnQsIGlucHV0UGFyYW1zLCBjYWxsYmFjayk7XG59O1xuXG5leHBvcnRzLm51bWJlckluc2lnaHRBZHZhbmNlZCA9IGZ1bmN0aW9uKGlucHV0UGFyYW1zLCBjYWxsYmFjaykge1xuICBudW1iZXJJbnNpZ2h0Q29tbW9uKG5pQWR2YW5jZWRFbmRwb2ludCwgaW5wdXRQYXJhbXMsIGNhbGxiYWNrKTtcbn07XG5cbmV4cG9ydHMubnVtYmVySW5zaWdodEFkdmFuY2VkQXN5bmMgPSBmdW5jdGlvbihpbnB1dFBhcmFtcywgY2FsbGJhY2spIHtcbiAgbnVtYmVySW5zaWdodEFzeW5jKGlucHV0UGFyYW1zLCBjYWxsYmFjayk7XG59O1xuXG5mdW5jdGlvbiBudW1iZXJJbnNpZ2h0QXN5bmMoaW5wdXRQYXJhbXMsIGNhbGxiYWNrKSB7XG4gIGlmICghaW5wdXRQYXJhbXMubnVtYmVyIHx8ICFpbnB1dFBhcmFtcy5jYWxsYmFjaykge1xuICAgIHNlbmRFcnJvcihcbiAgICAgIGNhbGxiYWNrLFxuICAgICAgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm51bWJlckluc2lnaHRBZHZhbmNlZFZhbGlkYXRpb24pXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbkVuZHBvaW50ID0gY2xvbmUobmlFbmRwb2ludCk7XG4gICAgbkVuZHBvaW50LnBhdGggKz0gXCI/XCIgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkoaW5wdXRQYXJhbXMpO1xuICAgIHNlbmRSZXF1ZXN0KG5FbmRwb2ludCwgY2FsbGJhY2spO1xuICB9XG59XG5cbmZ1bmN0aW9uIG51bWJlckluc2lnaHRDb21tb24oZW5kcG9pbnQsIGlucHV0UGFyYW1zLCBjYWxsYmFjaykge1xuICBpZiAodmFsaWRhdGVOdW1iZXIoaW5wdXRQYXJhbXMsIGNhbGxiYWNrKSkge1xuICAgIHZhciBpbnB1dE9iajtcbiAgICBpZiAodHlwZW9mIGlucHV0UGFyYW1zICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICBpbnB1dE9iaiA9IHsgbnVtYmVyOiBpbnB1dFBhcmFtcyB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnB1dE9iaiA9IGlucHV0UGFyYW1zO1xuICAgIH1cbiAgICB2YXIgbkVuZHBvaW50ID0gY2xvbmUoZW5kcG9pbnQpO1xuICAgIG5FbmRwb2ludC5wYXRoICs9IFwiP1wiICsgcXVlcnlzdHJpbmcuc3RyaW5naWZ5KGlucHV0T2JqKTtcbiAgICBzZW5kUmVxdWVzdChuRW5kcG9pbnQsIGNhbGxiYWNrKTtcbiAgfVxufVxuZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXIoaW5wdXRQYXJhbXMsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2YgaW5wdXRQYXJhbXMgPT09IFwib2JqZWN0XCIgJiYgIWlucHV0UGFyYW1zLm51bWJlcikge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm51bWJlckluc2lnaHRWYWxpZGF0aW9uKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2UgaWYgKFxuICAgIHR5cGVvZiBpbnB1dFBhcmFtcyA9PT0gXCJvYmplY3RcIiAmJlxuICAgICFudW1iZXJQYXR0ZXJuLnRlc3QoaW5wdXRQYXJhbXMubnVtYmVyKVxuICApIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5udW1iZXJJbnNpZ2h0UGF0dGVybkZhaWx1cmUpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSBpZiAoXG4gICAgdHlwZW9mIGlucHV0UGFyYW1zICE9PSBcIm9iamVjdFwiICYmXG4gICAgKCFpbnB1dFBhcmFtcyB8fCAhbnVtYmVyUGF0dGVybi50ZXN0KGlucHV0UGFyYW1zKSlcbiAgKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubnVtYmVySW5zaWdodFBhdHRlcm5GYWlsdXJlKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBzZW5kVm9pY2VNZXNzYWdlKHZvaWNlRW5kcG9pbnQsIGRhdGEsIGNhbGxiYWNrKSB7XG4gIGlmICghZGF0YS50bykge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLnRvKSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGVuZHBvaW50ID0gY2xvbmUodm9pY2VFbmRwb2ludCk7XG4gICAgZW5kcG9pbnQucGF0aCArPSBcIj9cIiArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShkYXRhKTtcbiAgICBfb3B0aW9ucy5sb2dnZXIuaW5mbyhcbiAgICAgIFwic2VuZGluZyBUVFMgbWVzc2FnZSB0byBcIiArIGRhdGEudG8gKyBcIiB3aXRoIG1lc3NhZ2UgXCIgKyBkYXRhLnRleHRcbiAgICApO1xuICAgIHNlbmRSZXF1ZXN0KGVuZHBvaW50LCBcIlBPU1RcIiwgZnVuY3Rpb24oZXJyLCBhcGlSZXNwb25zZSkge1xuICAgICAgaWYgKCFlcnIgJiYgYXBpUmVzcG9uc2Uuc3RhdHVzICYmIGFwaVJlc3BvbnNlLnN0YXR1cyA+IDApIHtcbiAgICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoYXBpUmVzcG9uc2VbXCJlcnJvci10ZXh0XCJdKSwgYXBpUmVzcG9uc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhlcnIsIGFwaVJlc3BvbnNlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnRzLnNlbmRUVFNNZXNzYWdlID0gZnVuY3Rpb24ocmVjaXBpZW50LCBtZXNzYWdlLCBvcHRzLCBjYWxsYmFjaykge1xuICBpZiAoIW1lc3NhZ2UpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5tc2cpKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIW9wdHMpIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG4gICAgb3B0c1tcInRvXCJdID0gcmVjaXBpZW50O1xuICAgIG9wdHNbXCJ0ZXh0XCJdID0gbWVzc2FnZTtcbiAgICBzZW5kVm9pY2VNZXNzYWdlKHR0c0VuZHBvaW50LCBvcHRzLCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbmV4cG9ydHMuc2VuZFRUU1Byb21wdFdpdGhDYXB0dXJlID0gZnVuY3Rpb24oXG4gIHJlY2lwaWVudCxcbiAgbWVzc2FnZSxcbiAgbWF4RGlnaXRzLFxuICBieWVUZXh0LFxuICBvcHRzLFxuICBjYWxsYmFja1xuKSB7XG4gIGlmICghbWVzc2FnZSkge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm1zZykpO1xuICB9IGVsc2UgaWYgKCFtYXhEaWdpdHMgfHwgaXNOYU4obWF4RGlnaXRzKSB8fCBtYXhEaWdpdHMubGVuZ3RoID4gMTYpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5tYXhEaWdpdHMpKTtcbiAgfSBlbHNlIGlmICghYnllVGV4dCkge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmJ5ZVRleHQpKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIW9wdHMpIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG4gICAgb3B0c1tcInRvXCJdID0gcmVjaXBpZW50O1xuICAgIG9wdHNbXCJ0ZXh0XCJdID0gbWVzc2FnZTtcbiAgICBvcHRzW1wibWF4X2RpZ2l0c1wiXSA9IG1heERpZ2l0cztcbiAgICBvcHRzW1wiYnllX3RleHRcIl0gPSBieWVUZXh0O1xuICAgIHNlbmRWb2ljZU1lc3NhZ2UodHRzUHJvbXB0RW5kcG9pbnQsIG9wdHMsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuZXhwb3J0cy5zZW5kVFRTUHJvbXB0V2l0aENvbmZpcm0gPSBmdW5jdGlvbihcbiAgcmVjaXBpZW50LFxuICBtZXNzYWdlLFxuICBtYXhEaWdpdHMsXG4gIHBpbkNvZGUsXG4gIGJ5ZVRleHQsXG4gIGZhaWxlZFRleHQsXG4gIG9wdHMsXG4gIGNhbGxiYWNrXG4pIHtcbiAgaWYgKCFtZXNzYWdlKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubXNnKSk7XG4gIH0gZWxzZSBpZiAoIW1heERpZ2l0cyB8fCBpc05hTihtYXhEaWdpdHMpIHx8IG1heERpZ2l0cy5sZW5ndGggPiAxNikge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm1heERpZ2l0cykpO1xuICB9IGVsc2UgaWYgKCFwaW5Db2RlIHx8IHBpbkNvZGUubGVuZ3RoICE9PSBtYXhEaWdpdHMpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5waW5Db2RlKSk7XG4gIH0gZWxzZSBpZiAoIWJ5ZVRleHQpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5ieWVUZXh0KSk7XG4gIH0gZWxzZSBpZiAoIWZhaWxlZFRleHQpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5mYWlsZWRUZXh0KSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFvcHRzKSB7XG4gICAgICBvcHRzID0ge307XG4gICAgfVxuICAgIG9wdHNbXCJ0b1wiXSA9IHJlY2lwaWVudDtcbiAgICBvcHRzW1widGV4dFwiXSA9IG1lc3NhZ2U7XG4gICAgb3B0c1tcIm1heF9kaWdpdHNcIl0gPSBtYXhEaWdpdHM7XG4gICAgb3B0c1tcInBpbl9jb2RlXCJdID0gcGluQ29kZTtcbiAgICBvcHRzW1wiYnllX3RleHRcIl0gPSBieWVUZXh0O1xuICAgIG9wdHNbXCJmYWlsZWRfdGV4dFwiXSA9IGZhaWxlZFRleHQ7XG4gICAgc2VuZFZvaWNlTWVzc2FnZSh0dHNQcm9tcHRFbmRwb2ludCwgb3B0cywgY2FsbGJhY2spO1xuICB9XG59O1xuXG5leHBvcnRzLmNhbGwgPSBmdW5jdGlvbihyZWNpcGllbnQsIGFuc3dlclVybCwgb3B0cywgY2FsbGJhY2spIHtcbiAgaWYgKCFhbnN3ZXJVcmwpIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5hbnN3ZXJVcmwpKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIW9wdHMpIHtcbiAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG4gICAgb3B0c1tcInRvXCJdID0gcmVjaXBpZW50O1xuICAgIG9wdHNbXCJhbnN3ZXJfdXJsXCJdID0gYW5zd2VyVXJsO1xuICAgIHNlbmRWb2ljZU1lc3NhZ2UoY2FsbEVuZHBvaW50LCBvcHRzLCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHNlbmRFcnJvcihjYWxsYmFjaywgZXJyLCByZXR1cm5EYXRhKSB7XG4gIC8vIFRocm93IHRoZSBlcnJvciBpbiBjYXNlIGlmIHRoZXJlIGlzIG5vIGNhbGxiYWNrIHBhc3NlZFxuICBpZiAoY2FsbGJhY2spIHtcbiAgICBjYWxsYmFjayhlcnIsIHJldHVybkRhdGEpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IGVycjtcbiAgfVxufVxuXG5leHBvcnRzLmdldFdpdGhRdWVyeSA9IGZ1bmN0aW9uKHBhdGgsIHF1ZXJ5LCBjcmVkcywgb3B0cywgY2FsbGJhY2spIHtcbiAgaWYgKCFxdWVyeSkge1xuICAgIHRocm93IG5ldyBFcnJvcignXCJxdWVyeVwiIGlzIGEgcmVxdWlyZWQgcGFyYW1ldGVyJyk7XG4gIH1cblxuICB2YXIgcGF0aEV4dCA9IFwiXCI7XG4gIGlmICh0eXBlb2YgcXVlcnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAvLyBzaW5nbGUgY2FsbCBJZFxuICAgIHBhdGhFeHQgPSBgLyR7cXVlcnl9YDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcXVlcnkgPT09IFwib2JqZWN0XCIgJiYgT2JqZWN0LmtleXMocXVlcnkpLmxlbmd0aCA+IDApIHtcbiAgICAvLyBmaWx0ZXJcbiAgICBwYXRoRXh0ID0gYD8ke3F1ZXJ5c3RyaW5nLnN0cmluZ2lmeShxdWVyeSl9YDtcbiAgfVxuXG4gIHZhciBjb25maWcgPSB7XG4gICAgaG9zdDogXCJhcGkubmV4bW8uY29tXCIsXG4gICAgcGF0aDogYCR7cGF0aH0ke3BhdGhFeHR9YCxcbiAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y3JlZHMuZ2VuZXJhdGVKd3QoKX1gXG4gICAgfVxuICB9O1xuICBvcHRzLmh0dHBDbGllbnQucmVxdWVzdChjb25maWcsIGNhbGxiYWNrKTtcbn07XG5cbmV4cG9ydHMuc2V0SG9zdCA9IGZ1bmN0aW9uKGFIb3N0KSB7XG4gIG1zZ3BhdGguaG9zdCA9IGFIb3N0O1xuICBzaG9ydGNvZGVQYXRoLmhvc3QgPSBhSG9zdDtcbiAgdHRzRW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICB0dHNQcm9tcHRFbmRwb2ludC5ob3N0ID0gYUhvc3Q7XG4gIGNhbGxFbmRwb2ludC5ob3N0ID0gYUhvc3Q7XG4gIHZlcmlmeUVuZHBvaW50Lmhvc3QgPSBhSG9zdDtcbiAgY2hlY2tWZXJpZnlFbmRwb2ludC5ob3N0ID0gYUhvc3Q7XG4gIGNvbnRyb2xWZXJpZnlFbmRwb2ludC5ob3N0ID0gYUhvc3Q7XG4gIHNlYXJjaFZlcmlmeUVuZHBvaW50Lmhvc3QgPSBhSG9zdDtcbiAgbmlFbmRwb2ludC5ob3N0ID0gYUhvc3Q7XG4gIG5pQmFzaWNFbmRwb2ludC5ob3N0ID0gYUhvc3Q7XG4gIG5pU3RhbmRhcmRFbmRwb2ludC5ob3N0ID0gYUhvc3Q7XG4gIGFwcGxpY2F0aW9uc0VuZHBvaW50Lmhvc3QgPSBhSG9zdDtcbn07XG4iXX0=